name: Push Image
on: [push]
  # push:
  #   tags:
  #     - 'v*.*.*'
jobs:
    Build:
      runs-on: ubuntu-20.04
      steps:
        - uses: actions/checkout@v3
        - name: Set up Go
          uses: actions/setup-go@v4
          with:
            go-version: '1.20'  
        - name: Install dependencies
          run: go mod download
        - name: Building image
          run: |
            go run single/build/main.go 
          env:
            HARBOR_BASE_URL: ${{vars.HARBOR_URL}} 
            HARBOR_PROJECT: ${{ vars.HARBOR_PROJECT  }}
            HARBOR_USER: ${{ vars.HARBOR_USER }}
            HARBOR_PASS: ${{ secrets.HARBOR_SECRET }}
        - name: Check image
          run: |
            docker images